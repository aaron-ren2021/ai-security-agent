# 文件檢索功能測試計畫

## 測試範圍

本測試計畫針對 `/api/rag/search` 文件檢索功能展開，包含單元測試、整合測試以及 E2E 測試。

## 測試項目

1. **單元測試**
   - 驗證有效查詢（例如包含關鍵字 "security"）回傳狀態碼 200 並包含 `results` 欄位
   - 驗證空查詢回傳狀態碼 400 與相對應的錯誤訊息

2. **整合測試**
   - 驗證 API 能夠正確與後端資料庫及相應檢索邏輯整合
   - 模擬實際文件檢索流程，確認回傳格式及結果合理性

3. **E2E 測試**
   - 模擬前端用戶從輸入查詢到獲取搜尋結果的完整流程
   - 檢查用戶與系統之間的互動是否正常，包括錯誤處理

## 測試環境

- Python、Flask、Pytest
- 使用 SQLite 測試資料庫（由 Flask 應用程式初始化）

## 測試工具

- Pytest
- Flask 測試客戶端

## 測試輸入與輸出

- **輸入**：JSON 格式的請求（包含 query 欄位），例如 `{ "query": "security" }` 或 `{ "query": "" }`
- **輸出**：對於有效查詢應回傳 `results` 陣列；對於空查詢回傳錯誤訊息及狀態碼 400

## 待補案例與風險

- **待補案例**：
  - 測試特殊字元查詢（例如正則表達式特殊字元）
  - 測試大量資料下的效能與回應時間
  - 測試多語言或非英文文件查詢

- **風險**：
  - 後端資料庫查詢效能未經大量資料測試
  - 異常資料格式可能導致搜尋失敗
